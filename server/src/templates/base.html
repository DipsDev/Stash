<!DOCTYPE html>
<html>
  <head>
    <title>Stash</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
      <style>
      * {
            font-family: "Source Sans 3", sans-serif;
        }

        @media (min-width: 768px) {
          #main-sidebar {
            transform: translateX("0px") !important
          }
        }
      </style>
      <script defer>
          var active = false;
          function toggle_drawer() {
              if (!active) {
                  document.getElementById("mobile-main-sidebar").style.transform = "translate(0px, 0px)";
                  document.getElementById("main-content").style.marginLeft = "230px"
                  active = true;
              } else {
                  document.getElementById("mobile-main-sidebar").style.transform = "translate(-230px, 0px)";
                  document.getElementById("main-content").style.marginLeft = "0px"
                  active = false;
              }
          }

          window.onresize = function() {
            if (window.innerWidth > 768) {
                active = false
                document.getElementById("mobile-main-sidebar").style.transform = "translate(-230px, 0px)";
                document.getElementById("main-content").style.marginLeft = "0px"
            }
          }

      </script>
  </head>
  <body>
    <nav class="md:bg-[#367FA9] flex flex-col md:flex-row items-center justify-start fixed w-full z-50">
        <a href="{{ url_for('landing_page') }}" class="bg-[#367FA9] w-full text-white text-xl font-bold p-3 text-center md:text-left">StashHub</a>
        <div class="bg-[#3C8DBC] md:bg-transparent w-full flex flex-row-reverse justify-between items-center p-4">

            {% if current_user.is_authenticated %}
                <p class="text-white">{{ current_user.username }}</p>
            {% else %}
                <a href="{{ url_for('auth.login_route') }}" class="text-white text-sm">Sign in</a>
            {% endif %}

            {% if self.sidebar() | trim %}
            <a href="#" class="md:hidden">
                <svg viewBox="0 0 100 80" width="12" height="12" fill="white" onclick="toggle_drawer()">
                  <rect width="100" height="20" rx="10"></rect>
                  <rect y="35" width="100" height="20" rx="10"></rect>
                  <rect y="70" width="100" height="20" rx="10"></rect>
                </svg>
            </a>
            {% endif %}


        </div>
    </nav>



    <main class="flex flex-col md:flex-row items-start justify-start w-full h-screen pt-[95px] md:pt-[50px]">
        <div class="w-full h-full relative">
                <div id="main-content" class="w-full h-full flex flex-row justify-start items-start" style="transition: ease-in-out 0.4s">
                    {% if self.sidebar() | trim %}
                    <div class="w-[230px] bg-[#222D32] text-white hidden md:block h-full">
                        {{ self.sidebar() }}
                    </div>
                    {% endif %}

                    {% block content %}
                    {% endblock %}

                </div>

                <div id="mobile-main-sidebar" class="z-10 absolute top-0 left-0 bg-[#222D32] h-full w-[230px] text-white md:hidden" style="transition: ease-in-out 0.4s; transform: translateX(-230px)">
                    {% block sidebar %}
                    {% endblock %}
                </div>
        </div>
    </main>
  </body>
</html>